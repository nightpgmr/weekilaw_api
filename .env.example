# Environment Configuration
NODE_ENV=production

# Server Configuration
PORT=3001
HOST=0.0.0.0

# Application Configuration
APP_NAME=Weekilaw API Server
APP_VERSION=1.0.0

# Logging
LOG_LEVEL=info

# External API Configuration (if needed)
# EXTERNAL_API_URL=https://api.example.com
# EXTERNAL_API_KEY=your-api-key-here

# Database Configuration (if needed in future)
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=weekilaw
# DB_USER=weekilaw
# DB_PASS=password

# Redis Configuration (if needed for caching)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
EOF && cat >> README.md << 'EOF'

## ðŸš€ GitHub Actions Deployment

This project includes automated deployment using GitHub Actions.

### Prerequisites

1. **GitHub Secrets** - Add the following secrets to your GitHub repository:
   - `SSH_HOST`: Your server IP address (78.110.124.182)
   - `SSH_USER`: SSH username
   - `SSH_KEY`: Private SSH key for authentication
   - `SSH_PORT`: SSH port (50022)

2. **Server Requirements**:
   - Node.js 20+
   - PM2 installed globally (`npm install -g pm2`)
   - SSH access with sudo privileges

### Deployment Flow

1. **Push to main/master branch** - Triggers automatic deployment
2. **Manual deployment** - Use GitHub Actions "Deploy API Server" workflow
3. **Server deployment**:
   - Installs dependencies
   - Stops existing PM2 process
   - Syncs files via rsync
   - Starts application with PM2
   - Configures auto-startup

### Manual Deployment

```bash
# On your server
cd /var/www/weekilaw-api
npm ci --production
npx pm2 start ecosystem.config.js
npx pm2 save
npx pm2 startup
```

### Monitoring

```bash
# Check PM2 status
npx pm2 status

# View application logs
npx pm2 logs weekilaw-api

# Real-time monitoring
npx pm2 monit

# Restart application
npx pm2 restart weekilaw-api
```

### Environment Variables

Copy `.env.example` to `.env` and configure your environment:

```bash
cp .env.example .env
# Edit .env with your configuration
```

### Troubleshooting

**Application not starting:**
```bash
npx pm2 logs weekilaw-api --lines 100
```

**Port already in use:**
```bash
# Find process using port 3001
sudo lsof -i :3001
# Kill the process or change port in ecosystem.config.js
```

**Permission issues:**
```bash
sudo chown -R $USER:$USER /var/www/weekilaw-api
```

**PM2 not persisting after reboot:**
```bash
npx pm2 startup
npx pm2 save
```
